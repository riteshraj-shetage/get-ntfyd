# ntfy server configuration
# Official docs: https://docs.ntfy.sh/config/

# Web UI settings
enable-signup: false       # Disable public signups for security
enable-login: true         # Enable login page
enable-reservations: false # Disable topic reservations (use ACLs instead)

# Default access policy (deny-all recommended for production)
auth-default-access: "deny-all"

# Behind proxy setting (assumes reverse proxy like Caddy/nginx)
behind-proxy: true

# Storage paths
cache-file: "/var/lib/ntfy/cache.db"
attachment-cache-dir: "/var/lib/ntfy/attachments"
auth-file: "/var/lib/ntfy/users.db"

# Cache settings
cache-duration: "12h"               # How long messages are cached
keepalive-interval: "45s"           # WebSocket keepalive interval

# Attachment settings
attachment-total-size-limit: "5G"   # Total size for all attachments
attachment-file-size-limit: "15M"   # Maximum size per attachment
attachment-expiry-duration: "3h"    # How long attachments are kept

# Rate Limiting Defaults (Proxy-Aware)
# These limits apply per visitor IP (not the proxy IP when behind-proxy: true)
visitor-subscription-limit: 30              # Max subscriptions per visitor
visitor-request-limit-burst: 60             # Burst requests allowed
visitor-request-limit-replenish: "5s"       # Rate at which requests replenish
visitor-message-daily-limit: 0              # 0 = unlimited daily messages
